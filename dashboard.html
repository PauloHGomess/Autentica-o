<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2rem; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; border: 1px solid #007bff; border-radius: 8px; background-color: #f8f9fa; }
        h1 { color: #007bff; }
        code { background-color: #e9ecef; padding: 2px 4px; border-radius: 3px; }
        .token-box { background-color: #fff; padding: 10px; border: 1px solid #ddd; word-break: break-all; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úÖ Dashboard (Acesso Permitido)</h1>
        
        <p>Parab√©ns, voc√™ acessou uma **Rota Protegida**!</p>

        <h2>Informa√ß√µes do Usu√°rio</h2>
        <ul>
            <li>**Usu√°rio:** <code>{{ username }}</code></li>
            <li>**Permiss√£o (Role):** <code>{{ role }}</code></li>
            <li>**M√©todo de Autentica√ß√£o Utilizado:** <strong>{{ auth_method }}</strong></li>
        </ul>
        
        {% if auth_method == "Session" and jwt_token and jwt_token != "N√£o gerado nesta requisi√ß√£o." %}
            <h2>üîë Token JWT Gerado (Para Testes de API)</h2>
            <p>Use este token no cabe√ßalho `Authorization: Bearer [token]` para acessar rotas protegidas com ferramentas como Postman.</p>
            <div class="token-box">
                {{ jwt_token }}
            </div>
        {% endif %}

        {% if role == "admin" %}
            <h2>‚öôÔ∏è Rota de Administra√ß√£o</h2>
            <p>Como administrador, voc√™ pode acessar a API de gerenciamento de usu√°rios:</p>
            <ul>
                <li><code>GET /users</code> (via API)</li>
                <li><code>POST /users</code> (via API)</li>
            </ul>
        {% endif %}
        
        <form action="{{ url_for('logout') }}" method="POST" style="margin-top: 20px;">
            <button type="submit">Sair (Logout)</button>
        </form>
    </div>
</body>
</html>